
## 人工智能绘画服务安装配置


### 添加普通用户 sd

		adduser sd


### 切换到用户 sd 操作

		su - sd


### 下载文件，需要保证外网畅通

		wget -q https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-webui/master/webui.sh

		chmod +x webui.sh


### 安装依赖

		sudo apt install -y wget git python3 python3-venv libgl1 libglib2.0-0 libtcmalloc-minimal4


### 启动 stable-diffusion-webui ；第一次启动将自动进行安装，需要保证外网畅通，安装完成后先退出

		./webui.sh --listen  --api --xformers

		没有 GPU 执行 ./webui.sh --listen  --skip-torch-cuda-test --precision full --no-half --use-cpu `nproc` --api 


### 下载 codeformer ；需要保证外网畅通

		mkdir -p /home/sd/stable-diffusion-webui/models/Codeformer

		wget https://github.com/sczhou/CodeFormer/releases/download/v0.1.0/codeformer.pth -O /home/sd/stable-diffusion-webui/models/Codeformer/codeformer-v0.1.0.pth


### 交互使用

		http://192.168.1.11:7860/



### 程序调用接口说明 

		http://192.168.1.11:7860/docs


### 例子

		SDWebUi sdWebUi = new SDWebUi();

		JSONObject o = sdWebUi.text2img("8k, high detail, sea, beach,   girl, detailed face", "logo, text", 3);

##### 生成结果

![image](https://github.com/AndyInAi/Winter/blob/main/img/grid-0000.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00000-1430822278.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00001-1430822279.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00002-1430822280.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00003-1430822281.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00004-1430822282.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00005-1430822283.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00006-1430822284.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00007-1430822285.png)
![image](https://github.com/AndyInAi/Winter/blob/main/img/00008-1430822286.png)



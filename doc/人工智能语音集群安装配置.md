
### 安装

	(! conda > /dev/null 2>&1 && [ ! -f ~/Miniconda3.sh ] && wget https://mirrors.aliyun.com/anaconda/miniconda/Miniconda3-py310_23.5.2-0-Linux-x86_64.sh -O ~/Miniconda3.sh)

	(! conda > /dev/null 2>&1 && bash ~/Miniconda3.sh)

	(conda > /dev/null 2>&1 && (source /root/.bashrc ; conda deactivate ; conda config --set auto_activate_base false))

	(echo '
		channels:
		  - defaults
		show_channel_urls: true
		default_channels:
		  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
		  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
		  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
		custom_channels:
		  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
		  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
		  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
		  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
		  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
		  pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
		  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
	' > ~/.condarc ; sed -i 's/^\t*//g' ~/.condarc ;conda config --show-sources )
	
	(mkdir -p ~/.pip; echo '
		[global]
		index-url = https://pypi.tuna.tsinghua.edu.cn/simple
		[install]
		trusted-host=pypi.tuna.tsinghua.edu.cn
	' > ~/.pip/pip.conf ; )

	conda create -y -n audioldm python=3.8; conda activate audioldm

	pip3 install audioldm 
	
	pip install --upgrade transformers==4.29.0
	
	cd ~ ; git clone https://github.com/haoheliu/AudioLDM; cd ~/AudioLDM

	sed -i 's/^iface.launch(.*/iface.launch(server_name="0.0.0.0", share=False, show_api=True)/g' ~/AudioLDM/app.py


### 运行

	conda activate audioldm
	
	cd ~/AudioLDM
	
	audioldm -t "Smoke on the water, We will rock" 



